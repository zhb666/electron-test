webpackJsonp([9],{bWCJ:function(e,t){},qa3b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("CtzY"),r=a.n(s),n={name:"charge",data:function(){return{tableData:[],getcustomerlist:[],name:"",NewdialogFormVisible:!1,dialogFormVisible:!1,limit:"",Toexamine:!1,totalRecords:0,page:1,logins:!1,username:"",remark:"",address:"",phone:"",contact:"",ChangeCheckStatus:"",Newusername:"",Newremark:"",Newaddress:"",Newphone:"",Newcontact:"",NewChangeCheckStatus:""}},mounted:function(){this.sendCharge(),this.getListType()},methods:{handleCurrentChange:function(e){var t=this;this.logins=!0;var a=this.ApiUrl+"/customer/getcustomerlistbypage";this.$http({method:"post",url:a,data:r.a.stringify({name:this.name,pageNum:e,pageSize:10})}).then(function(e){0==e.data.code?(t.logins=!1,t.tableData=e.data.data.data,t.totalRecords=e.data.data.totalCount):("403"==e.data.code&&t.Signout(),t.$message.error(e.data.msg))}).catch(function(e){console.log(e)})},sendCharge:function(e){var t=this;e&&(this.page=1),this.logins=!0;var a=this.ApiUrl+"/customer/getcustomerlistbypage";this.$http({method:"post",url:a,data:r.a.stringify({name:this.name,pageNum:this.page,pageSize:10})}).then(function(e){0==e.data.code?(t.logins=!1,t.tableData=e.data.data.data,t.totalRecords=e.data.data.totalCount):("403"==e.data.code&&t.Signout(),t.$message.error(e.data.msg))}).catch(function(e){console.log(e)})},getListType:function(){var e=this,t=this.ApiUrl+"/custometype/getallcustomtype";this.$http({method:"post",url:t}).then(function(t){0==t.data.code?e.getcustomerlist=t.data.data:("403"==t.data.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(e){console.log(e)})},newInfoFun:function(){this.NewdialogFormVisible=!0},NewshowmARKs:function(){this.NewdialogFormVisible=!1,this.Newremark="",this.Newaddress="",this.Newphone="",this.Newusername="",this.Newcontact=""},newXinjian:function(){var e=this;if(""==this.Newusername)return this.$message.error("错了哦，请输入正确的用户名"),!1;if(""==this.Newremark)return this.$message.error("错了哦，请输入客户描述"),!1;if(""==this.Newaddress)return this.$message.error("错了哦，请输入详细地址"),!1;if(""==this.Newphone)return this.$message.error("错了哦，请输入电话"),!1;if(""==this.Newcontact)return this.$message.error("错了哦，请输入联系人"),!1;if(""==this.NewChangeCheckStatus)return this.$message.error("错了哦，请选择类型"),!1;var t=this.ApiUrl+"/customer/addcustomer";this.$http({method:"post",url:t,data:r.a.stringify({name:this.Newusername,remark:this.Newremark,address:this.Newaddress,phone:this.Newphone,contact:this.Newcontact,type_id:this.NewChangeCheckStatus})}).then(function(t){0==t.data.code?(e.$notify({title:"新建成功",message:"这是一条成功的提示消息",type:"success"}),e.NewshowmARKs(),e.sendCharge()):("403"==t.data.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(e){console.log(e)})},deleteFun:function(e,t){var a=this;this.$confirm("确定删除？","提示",{confirmButtonText:"确认通过",cancelButtonText:"取消",type:"warning"}).then(function(){var e=a.ApiUrl+"/customer/delcustomer";a.$http({method:"post",url:e,data:r.a.stringify({id:t.id})}).then(function(e){0==e.data.code?(a.$notify({title:"删除成功",message:"这是一条成功的提示消息",type:"success"}),a.sendCharge()):a.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消审核"})})},getUserId:function(e,t){this.dialogFormVisible=!0,this.userIdMask=t.id,this.username=t.name,this.remark=t.remark,this.address=t.address,this.phone=t.phone,this.contact=t.contact},sendAgent:function(){var e=this;if(""==this.username)return this.$message.error("错了哦，请输入正确的用户名"),!1;if(""==this.remark)return this.$message.error("错了哦，请输入客户描述"),!1;if(""==this.address)return this.$message.error("错了哦，请输入详细地址"),!1;if(""==this.phone)return this.$message.error("错了哦，请输入电话"),!1;if(""==this.contact)return this.$message.error("错了哦，请输入联系人"),!1;if(""==this.ChangeCheckStatus)return this.$message.error("错了哦，请选择类型"),!1;var t=this.ApiUrl+"/customer/updatecustomer";this.$http({method:"post",url:t,data:r.a.stringify({id:this.userIdMask,name:this.username,remark:this.remark,address:this.address,phone:this.phone,contact:this.contact,type_id:this.ChangeCheckStatus})}).then(function(t){0==t.data.code?(e.$notify({title:"修改成功",message:"这是一条成功的提示消息",type:"success"}),e.sendCharge(),e.dialogFormVisible=!1):("403"==t.data.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(e){console.log(e)})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-dialog",{staticStyle:{width:"1200px",margin:"0 auto"},attrs:{"show-close":!1,title:"修改信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticStyle:{margin:"20px auto"}}),e._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"客户 : "}},[a("el-input",{attrs:{disabled:!0,placeholder:"客户"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户描述 : "}},[a("el-input",{attrs:{placeholder:"客户描述"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址 : "}},[a("el-input",{attrs:{placeholder:"详细地址"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式 : "}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人 : "}},[a("el-input",{attrs:{placeholder:"联系人"},model:{value:e.contact,callback:function(t){e.contact=t},expression:"contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型 : "}},[a("el-select",{attrs:{clearable:"",placeholder:"选择类型"},model:{value:e.ChangeCheckStatus,callback:function(t){e.ChangeCheckStatus=t},expression:"ChangeCheckStatus"}},e._l(e.getcustomerlist,function(e){return a("el-option",{key:e.id,attrs:{"track-by":"$index",label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{slot:""},slot:"default"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendAgent()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{width:"1200px",margin:"0 auto"},attrs:{"show-close":!1,title:"新建",visible:e.NewdialogFormVisible},on:{"update:visible":function(t){e.NewdialogFormVisible=t}}},[a("div",{staticStyle:{margin:"20px auto"}}),e._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"客户 : "}},[a("el-input",{attrs:{placeholder:"客户"},model:{value:e.Newusername,callback:function(t){e.Newusername=t},expression:"Newusername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户描述 : "}},[a("el-input",{attrs:{placeholder:"客户描述"},model:{value:e.Newremark,callback:function(t){e.Newremark=t},expression:"Newremark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址 : "}},[a("el-input",{attrs:{placeholder:"详细地址"},model:{value:e.Newaddress,callback:function(t){e.Newaddress=t},expression:"Newaddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式 : "}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:e.Newphone,callback:function(t){e.Newphone=t},expression:"Newphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人 : "}},[a("el-input",{attrs:{placeholder:"联系人"},model:{value:e.Newcontact,callback:function(t){e.Newcontact=t},expression:"Newcontact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型 : "}},[a("el-select",{attrs:{clearable:"",placeholder:"选择类型"},model:{value:e.NewChangeCheckStatus,callback:function(t){e.NewChangeCheckStatus=t},expression:"NewChangeCheckStatus"}},e._l(e.getcustomerlist,function(e){return a("el-option",{key:e.id,attrs:{"track-by":"$index",label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{slot:""},slot:"default"},[a("el-button",{on:{click:function(t){e.NewdialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.newXinjian()}}},[e._v("确`定")])],1)],1),e._v(" "),a("div",{staticClass:"animated fadeInDown"},[a("el-row",{staticClass:"breadcrumb"},[a("el-col",{attrs:{span:4}},[a("h3",[e._v("客户管理")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("客户中心")]),e._v(" "),a("el-breadcrumb-item",[e._v("客户管理")])],1)],1)],1),e._v(" "),a("div",{staticClass:"addPadding"},[a("div",{staticClass:"user_header"},[a("el-input",{attrs:{placeholder:"客户名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"2%"},attrs:{type:"primary"},on:{click:e.newInfoFun}},[e._v("新建")]),e._v(" "),a("el-button",{attrs:{type:"primary",title:"搜索",icon:"el-icon-search",loading:e.logins},on:{click:function(t){return e.sendCharge(1)}}})],1),e._v(" "),a("div",{staticClass:"user_main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logins,expression:"logins"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(33, 33, 33, 0.8)"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typename",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"激活数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",width:"190px;",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"修改",placement:"right",effect:"light"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.getUserId(t.$index,t.row)}}},[e._v("修改\n                ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"删除",placement:"right",effect:"light"}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteFun(t.$index,t.row)}}},[e._v("删除\n                ")])],1)]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalRecords>10,expression:"totalRecords>10"}],staticClass:"pageBox"},[a("el-pagination",{attrs:{"current-page":e.page,"page-size":10,layout:"prev, pager, next, jumper",total:e.totalRecords},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)])],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(n,i,!1,function(e){a("bWCJ")},"data-v-442ea5c4",null);t.default=o.exports}});