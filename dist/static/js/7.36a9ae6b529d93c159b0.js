webpackJsonp([7],{KD0Y:function(t,e){},L7f8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("CtzY"),s=a.n(i),o={name:"charge",data:function(){return{userName:"",NewuserName:"",tableData:[],actiCodeMask:"",NewactiCodeMask:"",userIdMask:"",name:"",NewdialogFormVisible:!1,dialogFormVisible:!1,limit:"",Toexamine:!1,totalRecords:0,page:1,logins:!1,open_off:!1}},mounted:function(){this.sendCharge()},methods:{handleCurrentChange:function(t){var e=this;this.logins=!0;var a=this.ApiUrl+"/version/getversionlistbypage";this.$http({method:"post",url:a,data:s.a.stringify({pageNum:t,pageSize:10})}).then(function(t){0==t.data.code?(e.logins=!1,e.tableData=t.data.data.data,e.totalRecords=t.data.data.totalCount):("403"==t.data.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(t){console.log(t)})},sendCharge:function(t){var e=this;t&&(this.page=1),this.logins=!0;var a=this.ApiUrl+"/version/getversionlistbypage";this.$http({method:"post",url:a,data:s.a.stringify({pageNum:this.page,pageSize:10})}).then(function(t){0==t.data.code?(e.logins=!1,e.tableData=t.data.data.data,e.totalRecords=t.data.data.totalCount):("403"==t.data.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(t){console.log(t)})},getUserId:function(t,e){this.dialogFormVisible=!0,this.userIdMask=e.id,this.actiCodeMask=e.version_number,this.userName=e.remark},sendAgent:function(){var t=this;if(""==this.actiCodeMask)return this.$message.error("错了哦，请输入版本号"),!1;if(""==this.userName)return this.$message.error("错了哦，请输入项目描述"),!1;var e=this.ApiUrl+"/version/updateversion";this.$http({method:"post",url:e,data:s.a.stringify({id:this.userIdMask,version_number:this.actiCodeMask,remark:this.userName})}).then(function(e){0==e.data.code?(t.$notify({title:"修改成功",message:"这是一条成功的提示消息",type:"success"}),t.showmARKs(),t.sendCharge()):("403"==e.data.code&&t.Signout(),t.$message.error(e.data.msg))}).catch(function(t){console.log(t)})},showmARKs:function(){this.dialogFormVisible=!1,this.userName="",this.showNameBox=!1,this.showNameBoxTWO=!1},NewshowmARKs:function(){this.NewdialogFormVisible=!1,this.NewuserName="",this.NewactiCodeMask=""},newInfoFun:function(){this.NewdialogFormVisible=!0},newXinjian:function(){var t=this;if(""==this.NewactiCodeMask)return this.$message.error("错了哦，请输入版本号"),!1;if(""==this.NewuserName)return this.$message.error("错了哦，请输入项目描述"),!1;var e=this.ApiUrl+"/version/checkversion";this.$http({method:"post",url:e,data:s.a.stringify({version_number:this.NewactiCodeMask})}).then(function(t){t.data.code}).catch(function(t){console.log(t)});var a=this.ApiUrl+"/version/addversion";this.$http({method:"post",url:a,data:s.a.stringify({version_number:this.NewactiCodeMask,remark:this.NewuserName})}).then(function(e){0==e.data.code?(t.$notify({title:"新建成功",message:"这是一条成功的提示消息",type:"success"}),t.NewshowmARKs(),t.sendCharge()):("403"==e.data.code&&t.Signout(),t.$message.error(e.data.msg))}).catch(function(t){console.log(t)})}},watch:{}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user"},[a("el-dialog",{staticStyle:{width:"1200px",margin:"0 auto"},attrs:{"show-close":!1,title:"修改信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticStyle:{margin:"20px auto"}}),t._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版本号 : "}},[a("el-input",{attrs:{disabled:!0,placeholder:"版本号"},model:{value:t.actiCodeMask,callback:function(e){t.actiCodeMask=e},expression:"actiCodeMask"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"版本描述 : "}},[a("el-input",{attrs:{placeholder:"版本描述"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{slot:""},slot:"default"},[a("el-button",{on:{click:t.showmARKs}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sendAgent()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{staticStyle:{width:"1200px",margin:"0 auto"},attrs:{"show-close":!1,title:"新建",visible:t.NewdialogFormVisible},on:{"update:visible":function(e){t.NewdialogFormVisible=e}}},[a("div",{staticStyle:{margin:"20px auto"}}),t._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版本号 : "}},[a("el-input",{attrs:{placeholder:"版本号"},model:{value:t.NewactiCodeMask,callback:function(e){t.NewactiCodeMask=e},expression:"NewactiCodeMask"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"版本描述 : "}},[a("el-input",{attrs:{placeholder:"版本描述"},model:{value:t.NewuserName,callback:function(e){t.NewuserName=e},expression:"NewuserName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{slot:""},slot:"default"},[a("el-button",{on:{click:function(e){t.NewdialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.newXinjian()}}},[t._v("确定")])],1)],1),t._v(" "),a("div",{staticClass:"animated fadeInDown"},[a("el-row",{staticClass:"breadcrumb"},[a("el-col",{attrs:{span:4}},[a("h3",[t._v("版本管理")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("客户中心")]),t._v(" "),a("el-breadcrumb-item",[t._v("版本管理")])],1)],1)],1),t._v(" "),a("div",{staticClass:"addPadding"},[a("div",{staticClass:"user_header"},[a("el-button",{staticStyle:{float:"right","margin-right":"2%"},attrs:{type:"primary"},on:{click:t.newInfoFun}},[t._v("新建")])],1),t._v(" "),a("div",{staticClass:"user_main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.logins,expression:"logins"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(33, 33, 33, 0.8)"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version_number",label:"版本号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"版本描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"use_num",label:"使用用户数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:"修改",placement:"right",effect:"light"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.getUserId(e.$index,e.row)}}},[t._v("修改\n                ")])],1)]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalRecords>10,expression:"totalRecords>10"}],staticClass:"pageBox"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":10,layout:"prev, pager, next, jumper",total:t.totalRecords},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(o,r,!1,function(t){a("KD0Y")},"data-v-6a2b4790",null);e.default=n.exports}});